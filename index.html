<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="è«é«˜çªŸæ™ºèƒ½å¯¼è§ˆç³»ç»Ÿ - ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„æ•¦ç…Œè«é«˜çªŸå‚è§‚å¯¼è§ˆæœåŠ¡">
    <meta name="keywords" content="è«é«˜çªŸ,æ•¦ç…Œ,å¯¼è§ˆ,æ™ºèƒ½å¯¼è§ˆ,æ–‡ç‰©,ä½›æ•™è‰ºæœ¯,å£ç”»,å½©å¡‘">
    <title>è«é«˜çªŸæ™ºèƒ½å¯¼è§ˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jwt-encode/3.1.2/jwt-encode.min.js"></script>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=roU0E4tM1eSairg4551IjRxGVOxgENyv"></script>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: 'unsafe-inline' 'unsafe-eval'; img-src 'self' data: https:;">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: "æ¥·ä½“", "STKaiti", "åæ–‡æ¥·ä½“", serif;
            background: #f5e6d3;
        }

        .cave-content {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .cave-card {
            margin-bottom: 20px;
        }

        .cave-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 8px;
        }

        .cave-description {
            padding: 20px;
            line-height: 1.6;
        }

        .navigation-menu {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: #fff;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .nav-btn {
            background: #8b4513;
            color: #f1c40f;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .audio-player {
            width: 100%;
            margin: 20px 0;
        }

        .time-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 251, 245, 0.95);
            padding: 12px 20px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(139, 69, 19, 0.2);
            border: 1px solid #d4b895;
            font-size: 20px;
            color: #8b4513;
            z-index: 100;
            text-align: center;
            min-width: 200px;
        }

        .map-btn {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: #8b4513;
            color: #f1c40f;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #d4b895;
            z-index: 1000;
        }

        .map-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
        }

        .map-container {
            position: relative;
            width: 80%;
            height: 80%;
            margin: 5% auto;
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }

        #baiduMap {
            width: 100%;
            height: 100%;
            border-radius: 4px;
        }

        .ai-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: #8b4513;
            color: #f1c40f;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #d4b895;
            z-index: 1000;
        }

        .ai-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
        }

        .ai-container {
            position: relative;
            width: 80%;
            height: 80%;
            margin: 5% auto;
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }

        .ai-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            margin-bottom: 20px;
        }

        .ai-input-container {
            display: flex;
            gap: 10px;
            padding: 10px;
        }

        .ai-input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #d4b895;
            border-radius: 4px;
            font-size: 16px;
        }

        .ai-send-btn {
            padding: 10px 20px;
            background: #8b4513;
            color: #f1c40f;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .ai-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            color: #8b4513;
            cursor: pointer;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .ai-close:hover {
            background: #f5e6d3;
        }

        .audio-section {
            background: #fff9f0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 6px rgba(139, 69, 19, 0.15);
        }
        
        .audio-section h3 {
            color: #8b4513;
            margin: 0 0 15px 0;
            font-size: 20px;
        }
        
        .custom-audio-player {
            width: 100%;
            height: 40px;
            border-radius: 20px;
            outline: none;
            background: #fff;
        }
        
        /* è‡ªå®šä¹‰éŸ³é¢‘æ’­æ”¾å™¨æ ·å¼ */
        audio::-webkit-media-controls-panel {
            background-color: #fff;
        }
        
        audio::-webkit-media-controls-play-button {
            background-color: #8b4513;
            border-radius: 50%;
        }
        
        audio::-webkit-media-controls-current-time-display,
        audio::-webkit-media-controls-time-remaining-display {
            color: #8b4513;
        }
    </style>
</head>
<body>
    <div class="time-display" id="timeDisplay"></div>
    <button class="map-btn" onclick="toggleMap()">æ™¯åŒºåœ°å›¾</button>
    
    <!-- åœ°å›¾æ¨¡æ€æ¡† -->
    <div class="map-modal" id="mapModal">
        <div class="map-container">
            <span class="close-map" onclick="toggleMap()">&times;</span>
            <div id="baiduMap"></div>
        </div>
    </div>

    <div class="cave-content">
        <div class="cave-card">
            <img id="caveImage" src="" alt="æ´çªŸå›¾ç‰‡" class="cave-image">
            <h2 id="caveTitle"></h2>
            <div id="caveDuration"></div>
            <audio id="caveAudio" controls class="audio-player">
                <!-- éŸ³é¢‘æºä¼šç”± JavaScript åŠ¨æ€è®¾ç½® -->
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
            </audio>
            <div id="caveDescription" class="cave-description"></div>
        </div>
    </div>

    <div class="navigation-menu">
        <button class="nav-btn" id="prevBtn" onclick="navigateCave('prev')">ä¸Šä¸€ä¸ªæ´çªŸ</button>
        <button class="nav-btn" id="playBtn" onclick="toggleAudio()">æ’­æ”¾è¯­éŸ³</button>
        <button class="nav-btn" id="nextBtn" onclick="navigateCave('next')">ä¸‹ä¸€ä¸ªæ´çªŸ</button>
    </div>

    <button class="ai-btn" onclick="toggleAIModal()">é—®AIå¯¼æ¸¸</button>
    
    <!-- AIå¯¹è¯æ¨¡æ€æ¡† -->
    <div class="ai-modal" id="aiModal">
        <div class="ai-container">
            <span class="ai-close" onclick="toggleAIModal()">&times;</span>
            <div class="ai-messages" id="aiMessages">
                <div class="message ai-message">
                    æ‚¨å¥½ï¼æˆ‘æ˜¯è«é«˜çªŸAIå¯¼æ¸¸ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚æ‚¨å¯ä»¥è¯¢é—®æˆ‘å…³äºè«é«˜çªŸçš„ä»»ä½•é—®é¢˜ã€‚
                </div>
            </div>
            <div class="ai-input-container">
                <input type="text" class="ai-input" id="aiInput" 
                       placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..."
                       onkeypress="if(event.keyCode === 13) sendMessage()">
                <button class="ai-send-btn" onclick="sendMessage()">å‘é€</button>
            </div>
        </div>
    </div>

    <script>
        // å®Œæ•´çš„æ´çªŸæ•°æ®
        const cavesData = [
            {
                id: 1,
                name: 'æ¸¸å®¢ä¸­å¿ƒ',
                period: 'ç¬¬ä¸€ç«™',
                audioUrl: 'public/ttsmaker-file-2025-2-12-19-53-15.mp3',
                imageUrl: 'public/images/visitor-center.jpg',
                description: `å¼€å¯è«é«˜çªŸä¹‹æ—…çš„ç¬¬ä¸€ç«™ï¼Œæ¸¸å®¢ä¸­å¿ƒä¸ºæ¸¸å®¢æä¾›ä¸°å¯Œçš„æ¸¸è§ˆä¿¡æ¯ã€‚åœ¨è¿™é‡Œï¼Œä½ ä¸ä»…èƒ½é¢†å–è¯¦ç»†çš„å¯¼è§ˆå›¾ï¼Œ
                            å¯¹è«é«˜çªŸçš„æ•´ä½“å¸ƒå±€ä¸å†å²æœ‰åˆæ­¥è®¤çŸ¥ï¼Œè¿˜èƒ½è§‚çœ‹ä¸¤éƒ¨æå…·ä»·å€¼çš„å½±ç‰‡ã€‚ä¸»é¢˜ç”µå½±å…¨æ–¹ä½å±•ç¤ºè«é«˜çªŸè·¨è¶Šåƒå¹´çš„å†å²å˜è¿ï¼Œ
                            çƒå¹•ç”µå½±åˆ™ä»¥æ²‰æµ¸å¼çš„æ–¹å¼ï¼Œè®©ä½ ä»¿è‹¥ç½®èº«æ´çªŸï¼Œæå‰é¢†ç•¥ç²¾ç¾å£ç”»ä¸å½©å¡‘ï¼Œä¸ºå®åœ°å‚è§‚å¥ å®šè‰¯å¥½åŸºç¡€ã€‚`,
                duration: '1.5å°æ—¶'
            },
            {
                id: 2,
                name: '96çªŸ',
                period: 'ç››å”',
                audioUrl: 'public/ttsmaker-file-2025-2-12-21-30-46.mp3',
                imageUrl: 'public/images/cave-96.jpg',
                description: 'ç¬¬96çªŸæ˜¯è«é«˜çªŸè§„æ¨¡æœ€å¤§çš„æ´çªŸä¹‹ä¸€ï¼Œå»ºäºå”ä»£ã€‚æ´çªŸé«˜35.5ç±³ï¼Œå†…æœ‰ä¸€å°Šå·¨å¤§çš„å¼¥å‹’ä½›ååƒï¼Œæ˜¯è«é«˜çªŸæœ€é«˜å¤§çš„å½©å¡‘é€ åƒã€‚ä½›åƒç¥æ€åº„ä¸¥ï¼Œæ¯”ä¾‹åŒ€ç§°ï¼Œä½“ç°äº†ç››å”æ—¶æœŸç²¾æ¹›çš„é›•å¡‘è‰ºæœ¯ã€‚æ´çªŸå£é¢ç»˜æœ‰ç²¾ç¾çš„å£ç”»ï¼Œä»¥é£å¤©ã€è©è¨ã€ä¾›å…»äººç­‰é¢˜æä¸ºä¸»ï¼Œè‰²å½©è‰³ä¸½ï¼Œçº¿æ¡æµç•…ï¼Œæ˜¯è«é«˜çªŸè‰ºæœ¯çš„ä»£è¡¨ä½œã€‚',
                duration: '30åˆ†é’Ÿ'
            },
            {
                id: 3,
                name: 'ç¬¬17çªŸ',
                period: 'è—ç»æ´',
                audioUrl: 'public/ttsmaker-file-2025-2-12-21-42-14.mp3',
                imageUrl: 'public/images/CD5DE8E99324CBE18BF4873AD11_55DA798C_EC7CA.png',
                description: `17çªŸæ˜¯ä¸¾ä¸–é—»åçš„è—ç»æ´ï¼Œè¿™é‡Œæ›¾è—æœ‰å…¬å…ƒ4ä¸–çºªåˆ°11ä¸–çºªçš„ä½›æ•™ç»å·ã€ç¤¾ä¼šæ–‡ä¹¦ã€åˆºç»£ã€ç»¢ç”»ã€æ³•å™¨ç­‰æ–‡ç‰©äº”ä¸‡ä½™ä»¶ã€‚
                            å°½ç®¡å¤§éƒ¨åˆ†çè´µæ–‡ç‰©æµå¤±æµ·å¤–ï¼Œä½†æ´çªŸå†…çš„å£ç”»å’Œå¡‘åƒä¾ç„¶æ•£å‘ç€ç‹¬ç‰¹çš„é­…åŠ›ã€‚å£ç”»ç”ŸåŠ¨æç»˜äº†ä½›æ•™ä¿®è¡Œåœºæ™¯ï¼Œ
                            å½©å¡‘ä¸­çš„é«˜åƒ§åƒç¥æ€é€¼çœŸï¼Œå…¶èƒŒåé‚£æ®µæ–‡ç‰©æµå¤±çš„å†å²ï¼Œæ›´èƒ½å¼•å‘å‚è§‚è€…å¯¹æ–‡ç‰©ä¿æŠ¤çš„æ·±åˆ»æ€è€ƒã€‚`,
                duration: '30åˆ†é’Ÿ'
            },
            {
                id: 4,
                name: 'ç¬¬257çªŸ',
                period: 'ä¹è‰²é¹¿',
                audioUrl: 'public/ttsmaker-file-2025-2-12-21-55-42.mp3',
                imageUrl: 'public/images/v2-50c269b262619640978ca4b07780ff87_r.jpg',
                description: `ç¬¬257çªŸæ˜¯è«é«˜çªŸè‘—åçš„è‰ºæœ¯å®çªŸä¹‹ä¸€ï¼Œä»¥å…¶ç²¾ç¾çš„å£ç”»è‘—ç§°ã€‚å…¶ä¸­æœ€å…·ä»£è¡¨æ€§çš„æ˜¯ã€Šä¹è‰²é¹¿æœ¬ç”Ÿæ•…äº‹ã€‹å£ç”»ï¼Œ
                            è¿™å¹…å£ç”»é‡‡ç”¨æ¨ªå·å¼æ„å›¾ï¼Œä»å·¦å³ä¸¤è¾¹å‘ä¸­é—´å±•å¼€ï¼Œç”ŸåŠ¨è®²è¿°äº†ä¹è‰²é¹¿æ•‘èµ·æººæ°´è€…ï¼Œå´è¢«æ©å°†ä»‡æŠ¥çš„æ•…äº‹ã€‚
                            ç”»é¢è‰²å½©é²œè‰³ï¼Œçº¿æ¡æµç•…ï¼Œäººç‰©å½¢è±¡æ ©æ ©å¦‚ç”Ÿï¼Œå°†å–„æ¶ç¾ä¸‘å±•ç°å¾—æ·‹æ¼“å°½è‡´ï¼Œæ˜¯è«é«˜çªŸå£ç”»è‰ºæœ¯çš„ç»å…¸ä¹‹ä½œï¼Œ
                            è•´å«ç€æ·±åˆ»çš„é“å¾·å¯“æ„ã€‚`,
                duration: '30åˆ†é’Ÿ'
            },
            {
                id: 5,
                name: 'ç¬¬254çªŸ',
                period: 'åŒ—é­é£æ ¼',
                audioUrl: 'public/ttsmaker-file-2025-2-12-22-33-41.mp3',
                imageUrl: 'public/images/R.jpg',
                description: `è¿™æ˜¯è«é«˜çªŸæ—©æœŸæ´çªŸçš„ä»£è¡¨ä¹‹ä¸€ï¼Œæ‹¥æœ‰ç‹¬ç‰¹çš„åŒ—é­é£æ ¼ã€‚æ´çªŸå†…çš„å£ç”»å’Œå½©å¡‘å±•ç°äº†åŒ—é­æ—¶æœŸçš„è‰ºæœ¯ç‰¹è‰²ï¼Œ
                            å¦‚å£ç”»ä¸­çš„äººç‰©é€ å‹æ¸…ç˜¦ï¼Œæœé¥°é£˜é€¸ï¼Œä½“ç°äº†"ç§€éª¨æ¸…åƒ"çš„é£æ ¼ç‰¹ç‚¹ã€‚è€Œè‘—åçš„ã€Šè¨åŸµå¤ªå­èˆèº«é¥²è™å›¾ã€‹å°±ä½äºæ­¤çªŸï¼Œ
                            è¿™å¹…å£ç”»æƒ…èŠ‚è·Œå®•èµ·ä¼ï¼Œé€šè¿‡ç»†è…»çš„ç¬”è§¦æç»˜äº†è¨åŸµå¤ªå­ä¸ºæ•‘é¥¿è™ï¼Œä¸æƒœèˆèº«çš„æ•…äº‹ï¼Œå±•ç°å‡ºå¼ºçƒˆçš„è‰ºæœ¯æ„ŸæŸ“åŠ›ã€‚`,
                duration: '30åˆ†é’Ÿ'
            },
            {
                id: 6,
                name: 'ç¬¬320çªŸ',
                period: 'ç››å”è‰ºæœ¯',
                audioUrl: 'public/ttsmaker-file-2025-2-12-22-40-50.mp3',
                imageUrl: 'public/images/OIP.jpg',
                description: `æ­¤çªŸä¸ºç››å”æ—¶æœŸçš„ä½³ä½œï¼Œä»¥å…¶ç²¾ç¾çš„å£ç”»å’Œç”ŸåŠ¨çš„å½©å¡‘é—»åã€‚çªŸé¡¶çš„è—»äº•å›¾æ¡ˆè‰²å½©ç»šä¸½ï¼Œä¸­å¿ƒçš„è²èŠ±é€ å‹é¥±æ»¡ï¼Œ
                            å››å‘¨ç¯ç»•ç€é£å¤©ã€‚è¥¿å£çš„é˜¿å¼¥é™€ç»å˜å£ç”»ï¼Œæç»˜äº†è¥¿æ–¹å‡€åœŸä¸–ç•Œçš„åä¸½æ™¯è±¡ï¼Œä¼—å¤šäººç‰©å½¢è±¡åˆ»ç”»ç»†è…»ï¼Œå§¿æ€å„å¼‚ï¼Œ
                            ä½“ç°äº†ç››å”æ—¶æœŸä½›æ•™è‰ºæœ¯çš„è¾‰ç…Œä¸ç¹è£ï¼Œè®©ä½ é¢†ç•¥åˆ°é‚£ä¸ªæ—¶ä»£é«˜è¶…çš„ç»˜ç”»æŠ€è‰ºå’Œä¸°å¯Œçš„æƒ³è±¡åŠ›ã€‚`,
                duration: '30åˆ†é’Ÿ'
            },
            {
                id: 7,
                name: 'æ•¦ç…Œç ”ç©¶é™¢é™¢å²é™ˆåˆ—é¦†',
                period: 'æ–‡ç‰©ä¿æŠ¤',
                audioUrl: 'public/ttsmaker-file-2025-2-12-22-47-14.mp3',
                imageUrl: 'public/images/010011200082qch9pC9F5.jpg',
                description: `å‚è§‚å®ŒçªŸåŒºåï¼Œæ¥åˆ°é™ˆåˆ—é¦†ã€‚è¿™é‡Œé€šè¿‡çè´µçš„å†å²ç…§ç‰‡ã€æ–‡çŒ®èµ„æ–™ä»¥åŠå®ç‰©å±•å“ï¼Œå±•ç¤ºäº†æ•¦ç…Œç ”ç©¶é™¢è‡ªæˆç«‹ä»¥æ¥çš„å‘å±•å†ç¨‹ï¼Œ
                            è¯¦ç»†ä»‹ç»äº†å‡ ä»£æ•¦ç…Œäººåœ¨è‰°è‹¦çš„ç¯å¢ƒä¸‹ï¼Œä¸ºä¿æŠ¤ã€ç ”ç©¶å’Œå¼˜æ‰¬è«é«˜çªŸæ–‡åŒ–æ‰€åšå‡ºçš„ä¸æ‡ˆåŠªåŠ›ï¼Œ
                            è®©ä½ æ·±å…¥äº†è§£è«é«˜çªŸçš„ä¿æŠ¤ä¸ä¼ æ‰¿èƒŒåçš„æ•…äº‹ã€‚`,
                duration: '1å°æ—¶'
            },
            {
                id: 8,
                name: 'æ•°å­—å±•ç¤ºä¸­å¿ƒ',
                period: 'å®Œç¾æ”¶å®˜',
                audioUrl: 'public/ttsmaker-file-2025-2-12-22-54-2.mp3',
                imageUrl: 'public/images/OIP (1).jpg',
                description: `è¿”å›æ•°å­—å±•ç¤ºä¸­å¿ƒï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥å†æ¬¡å›é¡¾è«é«˜çªŸçš„ç²¾å½©å†…å®¹ï¼Œä¹Ÿå¯ä»¥åœ¨ä¼‘æ¯åŒºç¨ä½œä¼‘æ¯ï¼Œ
                            è¿˜èƒ½åœ¨çºªå¿µå“å•†åº—æŒ‘é€‰ä¸€äº›å¸¦æœ‰è«é«˜çªŸå…ƒç´ çš„ç‰¹è‰²çºªå¿µå“ï¼Œå¦‚ç²¾ç¾çš„å£ç”»ä¸´æ‘¹ç”»å†Œã€é£å¤©é€ å‹çš„å·¥è‰ºå“ç­‰ï¼Œ
                            å°†è¿™æ®µç¾å¥½çš„è«é«˜çªŸä¹‹æ—…è®°å¿†å¸¦å›å®¶ã€‚`,
                duration: '1å°æ—¶'
            }
        ];

        let currentCaveIndex = 0;
        let isPlaying = false;

        function updateCaveDisplay() {
            const cave = cavesData[currentCaveIndex];
            
            document.getElementById('caveTitle').textContent = `${cave.name} - ${cave.period}`;
            document.getElementById('caveDuration').textContent = `é¢„è®¡æ¸¸è§ˆæ—¶é—´ï¼š${cave.duration}`;
            document.getElementById('caveImage').src = cave.imageUrl;
            document.getElementById('caveDescription').innerHTML = `<p>${cave.description}</p>`;
            
            const audio = document.getElementById('caveAudio');
            if (cave.audioUrl && cave.audioUrl.includes('.mp3')) {
                audio.src = cave.audioUrl;
                audio.load();
                
                // æ·»åŠ éŸ³é¢‘åŠ è½½çŠ¶æ€æç¤º
                const playBtn = document.getElementById('playBtn');
                playBtn.textContent = 'åŠ è½½ä¸­...';
                playBtn.disabled = true;
                
                audio.oncanplay = function() {
                    playBtn.textContent = 'æ’­æ”¾è¯­éŸ³';
                    playBtn.disabled = false;
                    console.log('éŸ³é¢‘å·²å°±ç»ª');
                };
                
                audio.onerror = function() {
                    console.error('éŸ³é¢‘åŠ è½½å¤±è´¥:', audio.error);
                    playBtn.textContent = 'éŸ³é¢‘åŠ è½½å¤±è´¥';
                    playBtn.disabled = true;
                    
                    // 3ç§’åè‡ªåŠ¨é‡è¯•
                    setTimeout(() => {
                        audio.load();
                    }, 3000);
                };
            } else {
                audio.src = '';
                console.log('å½“å‰ä½ç½®æš‚æ— éŸ³é¢‘è®²è§£');
            }
            
            document.getElementById('prevBtn').disabled = currentCaveIndex === 0;
            document.getElementById('nextBtn').disabled = currentCaveIndex === cavesData.length - 1;
            
            isPlaying = false;
        }

        function navigateCave(direction) {
            if (direction === 'next' && currentCaveIndex < cavesData.length - 1) {
                currentCaveIndex++;
            } else if (direction === 'prev' && currentCaveIndex > 0) {
                currentCaveIndex--;
            }
            updateCaveDisplay();
        }

        function toggleAudio() {
            const audio = document.getElementById('caveAudio');
            if (isPlaying) {
                audio.pause();
                document.getElementById('playBtn').textContent = 'æ’­æ”¾è¯­éŸ³';
            } else {
                audio.play();
                document.getElementById('playBtn').textContent = 'æš‚åœè¯­éŸ³';
            }
            isPlaying = !isPlaying;
        }

        // åŠ¨æ€æ—¶é—´æ˜¾ç¤ºåŠŸèƒ½
        function updateTime() {
            const now = new Date();
            const timeDisplay = document.getElementById('timeDisplay');
            
            const month = now.getMonth() + 1;
            const hour = now.getHours();
            const minute = now.getMinutes();
            
            const isPeakSeason = month >= 4 && month <= 11;
            let isOpenTime = false;
            
            if (isPeakSeason) {
                isOpenTime = hour >= 8 && (hour < 18 || (hour === 18 && minute === 0));
            } else {
                isOpenTime = hour >= 9 && (hour < 17 || (hour === 17 && minute <= 30));
            }
            
            const timeString = now.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            const dateString = now.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit'
            });
            
            timeDisplay.innerHTML = `
                <div>${dateString}</div>
                <div>${timeString}</div>
                <div style="color: ${isOpenTime ? '#52c41a' : '#f5222d'}">
                    ${isOpenTime ? 'æ™¯åŒºå¼€æ”¾ä¸­' : 'æ™¯åŒºå·²å…³é—­'}
                </div>
                <div style="font-size: 12px">
                    ${isPeakSeason ? 'æ—ºå­£ï¼š08:00-18:00' : 'æ·¡å­£ï¼š09:00-17:30'}
                </div>
            `;
        }

        // åœ°å›¾ç›¸å…³åŠŸèƒ½
        let map = null;
        let userMarker = null;
        let watchId = null;
        
        function initMap() {
            map = new BMap.Map("baiduMap");
            const centerPoint = new BMap.Point(94.818331, 40.037016);
            map.centerAndZoom(centerPoint, 17);
            map.enableScrollWheelZoom();
            
            // æ·»åŠ å®šä½æ§ä»¶
            const locationControl = new BMap.GeolocationControl({
                anchor: BMAP_ANCHOR_BOTTOM_RIGHT,
                showAddressBar: false,
                enableAutoLocation: true
            });
            map.addControl(locationControl);
            
            // æ·»åŠ æ™¯ç‚¹æ ‡è®°
            const locations = [
                {name: 'æ¸¸å®¢ä¸­å¿ƒ', position: [94.817831, 40.036516]},
                {name: 'ç¬¬96çªŸ', position: [94.818331, 40.037016]},
                {name: 'ç¬¬17çªŸ', position: [94.818531, 40.037216]},
                {name: 'ç¬¬257çªŸ', position: [94.818731, 40.037416]},
                {name: 'ç¬¬254çªŸ', position: [94.818931, 40.037616]},
                {name: 'ç¬¬320çªŸ', position: [94.819131, 40.037816]},
                {name: 'æ•¦ç…Œç ”ç©¶é™¢é™¢å²é™ˆåˆ—é¦†', position: [94.817631, 40.036316]},
                {name: 'æ•°å­—å±•ç¤ºä¸­å¿ƒ', position: [94.817531, 40.036216]}
            ];
            
            // å­˜å‚¨æ‰€æœ‰æ™¯ç‚¹ä¿¡æ¯ï¼Œç”¨äºè®¡ç®—è·ç¦»
            window.locationPoints = locations.map(loc => ({
                ...loc,
                point: new BMap.Point(loc.position[0], loc.position[1])
            }));
            
            locations.forEach(loc => {
                const point = new BMap.Point(loc.position[0], loc.position[1]);
                const marker = new BMap.Marker(point);
                map.addOverlay(marker);
                
                const label = new BMap.Label(loc.name, {
                    position: point,
                    offset: new BMap.Size(20, -10)
                });
                map.addOverlay(label);
            });

            // å¼€å§‹ç›‘å¬ä½ç½®
            startLocationWatch();
        }

        // å¼€å§‹ç›‘å¬ä½ç½®
        function startLocationWatch() {
            if (navigator.geolocation) {
                watchId = navigator.geolocation.watchPosition(
                    updateUserLocation,
                    handleLocationError,
                    {
                        enableHighAccuracy: true,
                        maximumAge: 30000,
                        timeout: 27000
                    }
                );
            } else {
                alert("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒä½ç½®æœåŠ¡");
            }
        }

        // æ›´æ–°ç”¨æˆ·ä½ç½®
        function updateUserLocation(position) {
            try {
                const userLat = position.coords.latitude;
                const userLng = position.coords.longitude;
                const userPoint = new BMap.Point(userLng, userLat);

                if (!userMarker) {
                    userMarker = new BMap.Marker(userPoint, {
                        icon: new BMap.Symbol(BMap_Symbol_SHAPE_CIRCLE, {
                            scale: 1,
                            fillColor: "#1890ff",
                            fillOpacity: 0.8,
                            strokeColor: "#fff",
                            strokeWeight: 2
                        })
                    });
                    map.addOverlay(userMarker);
                } else {
                    userMarker.setPosition(userPoint);
                }

                // æ·»åŠ å®šä½ç²¾åº¦åœˆ
                const accuracy = position.coords.accuracy;
                const circle = new BMap.Circle(userPoint, accuracy, {
                    strokeColor: "#1890ff",
                    strokeWeight: 1,
                    strokeOpacity: 0.3,
                    fillColor: "#1890ff",
                    fillOpacity: 0.1
                });
                map.addOverlay(circle);

                // æŸ¥æ‰¾æœ€è¿‘çš„æ™¯ç‚¹å¹¶ä¼˜åŒ–è§¦å‘è·ç¦»åˆ¤æ–­
                let nearestLocation = findNearestLocation(userPoint);
                if (nearestLocation) {
                    const distance = map.getDistance(userPoint, nearestLocation.point);
                    // æ ¹æ®ç²¾åº¦åŠ¨æ€è°ƒæ•´è§¦å‘è·ç¦»
                    const triggerDistance = Math.max(50, accuracy / 2);
                    if (distance <= triggerDistance) {
                        const caveIndex = cavesData.findIndex(cave => cave.name === nearestLocation.name);
                        if (caveIndex !== -1 && caveIndex !== currentCaveIndex) {
                            currentCaveIndex = caveIndex;
                            updateCaveDisplay();
                        }
                    }
                }
            } catch (error) {
                console.error('ä½ç½®æ›´æ–°é”™è¯¯:', error);
            }
        }

        // æŸ¥æ‰¾æœ€è¿‘çš„æ™¯ç‚¹
        function findNearestLocation(userPoint) {
            let nearestLocation = null;
            let minDistance = Infinity;

            window.locationPoints.forEach(loc => {
                const distance = map.getDistance(userPoint, loc.point);
                if (distance < minDistance) {
                    minDistance = distance;
                    nearestLocation = loc;
                }
            });

            return nearestLocation;
        }

        // å¤„ç†ä½ç½®é”™è¯¯
        function handleLocationError(error) {
            let errorMsg = "";
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    errorMsg = "ç”¨æˆ·æ‹’ç»äº†ä½ç½®è¯·æ±‚";
                    break;
                case error.POSITION_UNAVAILABLE:
                    errorMsg = "ä½ç½®ä¿¡æ¯ä¸å¯ç”¨";
                    break;
                case error.TIMEOUT:
                    errorMsg = "è¯·æ±‚è¶…æ—¶";
                    break;
                case error.UNKNOWN_ERROR:
                    errorMsg = "å‘ç”ŸæœªçŸ¥é”™è¯¯";
                    break;
            }
            console.error("ä½ç½®é”™è¯¯ï¼š", errorMsg);
        }
        
        function toggleMap() {
            const mapModal = document.getElementById('mapModal');
            if (mapModal.style.display === 'block') {
                mapModal.style.display = 'none';
                // åœæ­¢ä½ç½®ç›‘å¬
                if (watchId) {
                    navigator.geolocation.clearWatch(watchId);
                    watchId = null;
                }
            } else {
                mapModal.style.display = 'block';
                if (!map) {
                    initMap();
                } else {
                    // é‡æ–°å¼€å§‹ä½ç½®ç›‘å¬
                    startLocationWatch();
                }
            }
        }

        // æ·»åŠ é”™è¯¯ç›‘æ§å’Œä¸ŠæŠ¥
        window.addEventListener('error', function(event) {
            console.error('èµ„æºåŠ è½½é”™è¯¯:', {
                message: event.message,
                source: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                error: event.error
            });
            return true;
        }, true);

        // æ·»åŠ æ€§èƒ½ç›‘æ§
        window.addEventListener('load', function() {
            setTimeout(function() {
                const timing = window.performance.timing;
                const loadTime = timing.loadEventEnd - timing.navigationStart;
                console.log('é¡µé¢åŠ è½½æ—¶é—´:', loadTime + 'ms');
            }, 0);
        });

        // ä¼˜åŒ–èµ„æºåŠ è½½
        function preloadResources() {
            // é¢„åŠ è½½å›¾ç‰‡
            cavesData.forEach(cave => {
                const img = new Image();
                img.src = cave.imageUrl;
            });

            // é¢„åŠ è½½éŸ³é¢‘ï¼Œä½¿ç”¨ Promise å¤„ç†åŠ è½½çŠ¶æ€
            const audioPromises = cavesData.map(cave => {
                if (cave.audioUrl) {
                    return new Promise((resolve, reject) => {
                        const audio = new Audio();
                        audio.preload = 'metadata';
                        audio.src = cave.audioUrl;
                        audio.oncanplaythrough = resolve;
                        audio.onerror = reject;
                    });
                }
                return Promise.resolve();
            });

            Promise.all(audioPromises)
                .then(() => console.log('æ‰€æœ‰èµ„æºé¢„åŠ è½½å®Œæˆ'))
                .catch(error => console.error('èµ„æºé¢„åŠ è½½å¤±è´¥:', error));
        }

        // ä¼˜åŒ–åœ°å›¾åŠ è½½
        function initMapWithRetry(retryCount = 3) {
            try {
                initMap();
            } catch (error) {
                if (retryCount > 0) {
                    console.log(`åœ°å›¾åˆå§‹åŒ–å¤±è´¥ï¼Œå‰©ä½™é‡è¯•æ¬¡æ•°: ${retryCount}`);
                    setTimeout(() => initMapWithRetry(retryCount - 1), 2000);
                } else {
                    console.error('åœ°å›¾åˆå§‹åŒ–å¤±è´¥:', error);
                    alert('åœ°å›¾åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                }
            }
        }

        // é¡µé¢åŠ è½½ä¼˜åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æµè§ˆå™¨å…¼å®¹æ€§
            if (!window.Promise || !window.fetch) {
                alert('æ‚¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼ŒæŸäº›åŠŸèƒ½å¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œå»ºè®®å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬');
            }

            // åˆå§‹åŒ–é¡µé¢
            updateCaveDisplay();
            updateTime();
            setInterval(updateTime, 1000);
            
            // å»¶è¿ŸåŠ è½½éå…³é”®èµ„æº
            setTimeout(preloadResources, 1000);
        });

        // JWT ç”Ÿæˆå‡½æ•°
        function generateToken(apiKey) {
            const [id, secret] = apiKey.split('.');
            const now = Date.now();
            
            const header = {
                alg: 'HS256',
                sign_type: 'SIGN'
            };
            
            const payload = {
                api_key: id,
                exp: Math.floor(now/1000) + 3600, // ä½¿ç”¨ç§’çº§æ—¶é—´æˆ³
                timestamp: now
            };
            
            // ä½¿ç”¨ jwt-encode åº“ç”Ÿæˆtoken
            return jwt.encode(payload, secret, header);
        }

        // AIå¯¹è¯é…ç½®
        const AI_CONFIG = {
            apiKey: '58d40582393749fe9480c9b69ce8fdc2.4kh0vsQOkVwsi7ki',
            baseUrl: 'https://open.bigmodel.cn/api/paas/v4/chat/completions',
            model: 'glm-4'
        };

        // é¢„è®¾é—®ç­”åº“
        const QA_DATABASE = {
            'ä½ç½®åœ¨å“ªé‡Œ|æ€ä¹ˆæ‰¾åˆ°è«é«˜çªŸ|è«é«˜çªŸå…·ä½“ä½ç½®|åˆ°è«é«˜çªŸæ€ä¹ˆèµ°|è«é«˜çªŸåœ°ç†ä½ç½®|è«é«˜çªŸåœ¨ä»€ä¹ˆåœ°æ–¹': 'è«é«˜çªŸä½äºç”˜è‚ƒçœæ•¦ç…Œå¸‚ä¸œå—25å…¬é‡Œå¤„çš„é¸£æ²™å±±ä¸œéº“æ–­å´–ä¸Šã€‚å®ƒæ‰€åœ¨çš„æ•¦ç…Œï¼Œåœ°å¤„æ²³è¥¿èµ°å»Šè¥¿ç«¯ï¼Œæ˜¯å¤ä»£ä¸ç»¸ä¹‹è·¯ä¸Šçš„é‡è¦èŠ‚ç‚¹åŸå¸‚ã€‚',
            'ä»€ä¹ˆæ—¶å€™å¼€é—¨|å‡ ç‚¹å¼€å§‹å‚è§‚|å¼€æ”¾æ—¶é—´æ˜¯æ€ä¹ˆå®‰æ’çš„|ç°åœ¨èƒ½è¿›å»å—|å¼€é—¨æ—¶é—´æ˜¯ä»€ä¹ˆæ—¶å€™|å‡ ç‚¹å…³é—¨|æœ€æ™šä»€ä¹ˆæ—¶å€™èƒ½è¿›å»': 'è«é«˜çªŸå®è¡Œæ·¡æ—ºå­£å¼€æ”¾æ—¶é—´ã€‚æ—ºå­£ï¼ˆ4æœˆ-10æœˆï¼‰ï¼š08:00-18:00ï¼›æ·¡å­£ï¼ˆ11æœˆ-æ¬¡å¹´3æœˆï¼‰ï¼š09:00-17:30ã€‚å»ºè®®æå‰2-3å°æ—¶åˆ°è¾¾æ•°å­—å±•ç¤ºä¸­å¿ƒè§‚çœ‹æ•°å­—å½±ç‰‡ï¼Œç„¶åä¹˜åæ‘†æ¸¡è½¦å‰å¾€å®ä½“æ´çªŸå‚è§‚ã€‚',
            'é—¨ç¥¨æ€ä¹ˆä¹°|ç¥¨ä»·æ˜¯å¤šå°‘|å‚è§‚è¦èŠ±å¤šå°‘é’±|é—¨ç¥¨è´µä¸è´µ|é—¨ç¥¨éƒ½åŒ…å«ä»€ä¹ˆ|ä¹°ä»€ä¹ˆç¥¨æ¯”è¾ƒå¥½|é—¨ç¥¨æœ‰ä¼˜æƒ å—|å­¦ç”Ÿç¥¨æ€ä¹ˆä¹°': 'è«é«˜çªŸé—¨ç¥¨ä¸»è¦æœ‰Aç±»ã€Bç±»ç­‰ç±»å‹ã€‚Aç±»é—¨ç¥¨å…¨ä»·ç¥¨238å…ƒ/äººï¼ŒåŒ…å«è§‚çœ‹ä¸»é¢˜æ•°å­—ç”µå½±ã€Šåƒå¹´è«é«˜ã€‹å’Œçƒå¹•ç”µå½±ã€Šæ¢¦å¹»ä½›å®«ã€‹ï¼Œä¹‹åä¹˜åæ‘†æ¸¡è½¦å‰å¾€è«é«˜çªŸå®ä½“æ´çªŸï¼Œç”±ä¸“ä¸šè®²è§£å‘˜å¸¦é¢†å‚è§‚8ä¸ªæ´çªŸã€‚Bç±»é—¨ç¥¨å…¨ä»·ç¥¨100å…ƒ/äººï¼Œåªå®‰æ’å‚è§‚è«é«˜çªŸå®ä½“æ´çªŸ4ä¸ªï¼Œä¸åŒ…å«æ•°å­—ç”µå½±ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé—¨ç¥¨ä»·æ ¼å¯èƒ½ä¼šæ ¹æ®æ™¯åŒºæ”¿ç­–æœ‰æ‰€è°ƒæ•´ï¼Œå»ºè®®åœ¨å®˜æ–¹æ¸ é“æŸ¥è¯¢æœ€æ–°ä¿¡æ¯ã€‚',
            'å¸¦å­©å­å»åˆé€‚å—|é€‚åˆå¸¦å°æœ‹å‹å—|è€äººèƒ½å»å‚è§‚å—|å¸¦çˆ¶æ¯å»æ–¹ä¾¿å—|å®¶åº­å‡ºæ¸¸æ¨èå—': 'å¸¦ç€è€äººå’Œå­©å­å‡ºè¡Œï¼Œè¡Œç¨‹å®‰æ’è¦æ›´åŠ å®½æ¾èˆ’é€‚ã€‚å‚è§‚è«é«˜çªŸæ—¶ï¼Œå°½é‡é€‰æ‹©ä¸Šåˆæ—¶æ®µï¼Œæ­¤æ—¶å¤§å®¶ç²¾åŠ›å……æ²›ï¼Œä¸”æ´çªŸå†…å…‰çº¿å’Œæ¸©åº¦ç›¸å¯¹é€‚å®œã€‚åœ¨è§‚çœ‹æ•°å­—ç”µå½±æ—¶ï¼Œæå‰é€‰å¥½èˆ’é€‚çš„åº§ä½ã€‚å‚è§‚è¿‡ç¨‹ä¸­è¦é€‚å½“ä¼‘æ¯ï¼Œè¡¥å……æ°´åˆ†å’Œé£Ÿç‰©ã€‚é¿å…å®‰æ’è¿‡äºç´§å‡‘çš„æ™¯ç‚¹è½¬æ¢ï¼Œå‡å°‘è·¯é€”å¥”æ³¢ã€‚å¦å¤–ï¼Œè¦å‡†å¤‡é˜²æ™’ç”¨å“ã€é˜²é£è¡£ç‰©å’Œä¿æ¹¿æŠ¤è‚¤å“ï¼Œå› ä¸ºæ•¦ç…Œæ°”å€™å¹²ç‡¥ï¼Œç´«å¤–çº¿å¼ºã€‚',
            'æœ€è‘—åçš„æ˜¯å“ªä¸ªæ´çªŸ|å“ªä¸ªæ´çªŸæœ€å€¼å¾—çœ‹|æ¨èå»å“ªä¸ªæ´çªŸ|å¿…çœ‹çš„æ´çªŸæœ‰å“ªäº›|æœ€ç²¾åçš„æ˜¯å“ªäº›': 'è«é«˜çªŸæœ€è‘—åçš„æ´çªŸåŒ…æ‹¬ï¼šç¬¬17çªŸ"è—ç»æ´"ï¼Œ1900å¹´å‘ç°å¤§é‡çè´µæ–‡ç‰©ï¼›ç¬¬96çªŸ"ä¹å±‚æ¥¼"ï¼Œä¾›å¥‰ç€35.5ç±³é«˜çš„å¼¥å‹’ä½›ååƒï¼›ç¬¬257çªŸï¼Œæœ‰è‘—åçš„ã€Šä¹è‰²é¹¿æœ¬ç”Ÿã€‹å£ç”»ï¼›ç¬¬45çªŸï¼Œä»¥ç²¾ç¾çš„é£å¤©å£ç”»é—»åã€‚æ¯ä¸ªæ´çªŸéƒ½æœ‰å…¶ç‹¬ç‰¹çš„è‰ºæœ¯ä»·å€¼å’Œå†å²æ„ä¹‰ã€‚',
            'å‚è§‚è¦å¤šé•¿æ—¶é—´|å¤§æ¦‚è¦ç©å¤šä¹…|å‡ ä¸ªå°æ—¶èƒ½é€›å®Œ|å»ºè®®å¾…å¤šä¹…|è¦é¢„ç•™å¤šå°‘æ—¶é—´': 'å»ºè®®é¢„ç•™ä¸€æ•´å¤©æ—¶é—´ã€‚ä¸Šåˆå…ˆåœ¨æ•°å­—å±•ç¤ºä¸­å¿ƒè§‚çœ‹æ•°å­—ç”µå½±ï¼ˆçº¦1.5å°æ—¶ï¼‰ï¼Œç„¶åå‚è§‚æ´çªŸï¼ˆ2-3å°æ—¶ï¼‰ï¼Œä¸‹åˆå¯ä»¥å‚è§‚é™ˆåˆ—é¦†ï¼ˆ1å°æ—¶ï¼‰ã€‚å¦‚æœæƒ³æ·±å…¥äº†è§£ï¼Œå»ºè®®å®‰æ’ä¸¤å¤©ï¼Œç¬¬äºŒå¤©å¯ä»¥å‚è§‚æ›´å¤šæ´çªŸï¼Œæˆ–å»æ•¦ç…Œç ”ç©¶é™¢äº†è§£æ–‡ç‰©ä¿æŠ¤å·¥ä½œã€‚',
            'æœ‰è®²è§£å™¨å—|å¯¼æ¸¸è®²è§£æ€ä¹ˆå®‰æ’|èƒ½è¯·å¯¼æ¸¸å—|è®²è§£æœåŠ¡æ€ä¹ˆæ ·|è‹±è¯­è®²è§£æœ‰å—': 'è«é«˜çªŸå®è¡Œä¸“ä¸šè®²è§£å‘˜å…¨ç¨‹è®²è§£åˆ¶åº¦ã€‚Aç±»é—¨ç¥¨åŒ…å«è®²è§£æœåŠ¡ï¼Œè®²è§£å‘˜ä¼šè¯¦ç»†ä»‹ç»æ¯ä¸ªæ´çªŸçš„å†å²èƒŒæ™¯ã€è‰ºæœ¯ç‰¹è‰²å’Œæ–‡åŒ–å†…æ¶µã€‚ä¹Ÿå¯ä»¥æå‰é¢„çº¦è‹±è¯­ã€æ—¥è¯­ç­‰å¤–è¯­è®²è§£æœåŠ¡ã€‚è®²è§£å‘˜éƒ½ç»è¿‡ä¸“ä¸šåŸ¹è®­ï¼Œèƒ½å¤Ÿæ·±å…¥æµ…å‡ºåœ°ä»‹ç»è«é«˜çªŸæ–‡åŒ–ã€‚',
            'å¤©æ°”çƒ­å—|ä»€ä¹ˆå­£èŠ‚å»æœ€å¥½|å‡ æœˆä»½å»æœ€åˆé€‚|ç°åœ¨å¤©æ°”æ€ä¹ˆæ ·|éœ€è¦å¸¦å¤–å¥—å—': 'æ•¦ç…Œå±äºæ¸©å¸¦å¹²æ—±æ°”å€™ï¼Œæ˜¼å¤œæ¸©å·®å¤§ã€‚æ˜¥ç§‹ä¸¤å­£ï¼ˆ4-5æœˆã€9-10æœˆï¼‰æœ€é€‚åˆå‚è§‚ï¼Œæ°”æ¸©é€‚å®œã€‚å¤å­£ï¼ˆ6-8æœˆï¼‰ç‚çƒ­ï¼Œéœ€è¦é˜²æš‘ï¼›å†¬å­£ï¼ˆ11-2æœˆï¼‰å¯’å†·ï¼Œè¦é˜²å¯’ã€‚æ— è®ºä»€ä¹ˆå­£èŠ‚éƒ½è¦æ³¨æ„é˜²æ™’ï¼Œå»ºè®®å¸¦å¸½å­ã€é˜²æ™’è¡£ç‰©ï¼Œå‡†å¤‡å……è¶³çš„æ°´ã€‚',
            'æœ‰æ²¡æœ‰å¥½ç©çš„çºªå¿µå“|ä¼´æ‰‹ç¤¼ä¹°ä»€ä¹ˆå¥½|æœ‰ç‰¹è‰²çš„çºªå¿µå“æ¨è|æƒ³å¸¦ç‚¹ç‰¹äº§å›å»': 'è«é«˜çªŸæ–‡åˆ›å•†åº—æä¾›å¤šç§ç‰¹è‰²å•†å“ï¼š1. å£ç”»å¤åˆ¶å“å’Œç”»å†Œï¼Œåˆ¶ä½œç²¾ç¾ï¼Œå¾ˆæœ‰æ”¶è—ä»·å€¼ï¼›2. ä¸å·¾ã€å›´å·¾ç­‰æœé¥°ï¼Œèå…¥æ•¦ç…Œå…ƒç´ ï¼›3. é£å¤©ä¸»é¢˜æ–‡åˆ›äº§å“ï¼Œå¾ˆæœ‰ç‰¹è‰²ï¼›4. æ•¦ç…Œç ”ç©¶é™¢å‡ºç‰ˆçš„ä¹¦ç±å’Œæ˜ä¿¡ç‰‡ï¼›5. è«é«˜çªŸä¸»é¢˜çš„æ–‡å…·å’Œæ—¥ç”¨å“ã€‚å»ºè®®å‚è§‚ç»“æŸåè´­ä¹°ï¼Œé¿å…æºå¸¦å¤ªå¤šç‰©å“ã€‚',
            'ç‰¹ç‚¹|ç‰¹è‰²|çœ‹ç‚¹|äº®ç‚¹|ç²¾å|ä»£è¡¨æ€§': 'è«é«˜çªŸçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š1. å»ºç­‘è‰ºæœ¯ï¼š492ä¸ªå½©ç»˜æ´çªŸï¼Œå¤šå±‚é”™è½æœ‰è‡´çš„å»ºç­‘ç¾¤å±•ç°äº†ç²¾æ¹›çš„å»ºç­‘æŠ€è‰ºï¼›2. å£ç”»è‰ºæœ¯ï¼š45000å¹³æ–¹ç±³çš„å£ç”»ï¼Œé¢˜æä¸°å¯Œï¼ŒæŠ€æ³•å¤šæ ·ï¼Œæ˜¯ä¸–ç•Œä¸Šç°å­˜è§„æ¨¡æœ€å¤§çš„ä½›æ•™è‰ºæœ¯å®åº“ï¼›3. å½©å¡‘è‰ºæœ¯ï¼š2000å¤šå°Šå½©å¡‘ï¼Œé€ å‹ç”ŸåŠ¨ï¼Œæ˜¯ä¸­å›½æœ€å¤§çš„å½©å¡‘è‰ºæœ¯å®åº“ï¼›4. æ–‡åŒ–ä»·å€¼ï¼šè—ç»æ´å‡ºåœŸçš„å¤§é‡æ–‡ç‰©ï¼Œå±•ç°äº†å¤ä»£ä¸ç»¸ä¹‹è·¯çš„æ–‡åŒ–äº¤æµï¼›5. ä½›æ•™è‰ºæœ¯ï¼šå®Œæ•´è®°å½•äº†ä¸­å›½ä½›æ•™è‰ºæœ¯ä»å…´èµ·åˆ°é¼ç››çš„å‘å±•å†ç¨‹ã€‚',
            'å£ç”»ç‰¹ç‚¹|å£ç”»è‰ºæœ¯|å£ç”»é£æ ¼|ç”»çš„æ€ä¹ˆæ ·': 'è«é«˜çªŸå£ç”»è‰ºæœ¯ç‰¹ç‚¹ä¸»è¦æœ‰ï¼š1. é¢˜æå¹¿æ³›ï¼šåŒ…æ‹¬ä½›æ•™æ•…äº‹ã€ç»å˜ç”»ã€ä¾›å…»äººåƒã€å±±æ°´äººç‰©ç­‰ï¼›2. æŠ€æ³•ç²¾æ¹›ï¼šè¿ç”¨æ™•æŸ“ã€å‹¾å‹’ã€æ¸²æŸ“ç­‰å¤šç§ç»˜ç”»æŠ€æ³•ï¼›3. è‰²å½©ç»šä¸½ï¼šé‡‡ç”¨å¤©ç„¶çŸ¿ç‰©é¢œæ–™ï¼Œè‰²å½©è‰³ä¸½æŒä¹…ï¼›4. é£æ ¼å¤šæ ·ï¼šèåˆäº†ä¸­åŸã€è¥¿åŸŸç­‰å¤šåœ°è‰ºæœ¯ç‰¹è‰²ï¼›5. å†…å®¹ä¸°å¯Œï¼šä¸ä»…å±•ç°ä½›æ•™é¢˜æï¼Œè¿˜è®°å½•äº†å¤ä»£ç¤¾ä¼šç”Ÿæ´»ã€æœé¥°ã€ä¹èˆç­‰æ–‡åŒ–å†…å®¹ã€‚',
            'å½©å¡‘ç‰¹ç‚¹|ä½›åƒç‰¹ç‚¹|å¡‘åƒè‰ºæœ¯|é›•å¡‘ç‰¹è‰²': 'è«é«˜çªŸå½©å¡‘è‰ºæœ¯ç‰¹ç‚¹åŒ…æ‹¬ï¼š1. é€ å‹ç”ŸåŠ¨ï¼šäººç‰©å½¢è±¡æ ©æ ©å¦‚ç”Ÿï¼Œè¡¨æƒ…ä¸°å¯Œï¼›2. æŠ€è‰ºç²¾æ¹›ï¼šé‡‡ç”¨æ³¥å¡‘å½©ç»˜å·¥è‰ºï¼Œå†…éƒ¨ç”¨æœ¨éª¨æ¶æ”¯æ’‘ï¼›3. è§„æ¨¡å®å¤§ï¼šä»å·¨å¤§çš„ä½›åƒåˆ°å°å‹è©è¨åƒï¼Œå°ºå¯¸å¤šæ ·ï¼›4. è‰ºæœ¯é£æ ¼ï¼šä¸åŒæ—¶æœŸå±•ç°ä¸åŒçš„è‰ºæœ¯ç‰¹è‰²ï¼Œåæ˜ äº†ä½›æ•™è‰ºæœ¯çš„å‘å±•ï¼›5. ä¿å­˜å®Œå¥½ï¼šç”±äºå¹²ç‡¥çš„æ°”å€™æ¡ä»¶ï¼Œè®¸å¤šå½©å¡‘ä¿å­˜çŠ¶å†µè‰¯å¥½ã€‚',
            'å»ºç­‘ç‰¹ç‚¹|å»ºç­‘è‰ºæœ¯|å»ºç­‘é£æ ¼|æ´çªŸç‰¹ç‚¹': 'è«é«˜çªŸå»ºç­‘è‰ºæœ¯ç‰¹ç‚¹æœ‰ï¼š1. ä¾å´–è€Œå»ºï¼šå·§å¦™åˆ©ç”¨æ–­å´–åœ°å½¢ï¼Œå¼€å‡¿æ´çªŸï¼›2. å¤šå±‚å¸ƒå±€ï¼šæ´çªŸä¸Šä¸‹äº”å±‚ï¼Œé”™è½æœ‰è‡´ï¼›3. å»ºç­‘å½¢å¼ï¼šæœ‰ä¸­å¿ƒæŸ±çªŸã€å¤§åƒçªŸã€ç¦…çªŸç­‰ä¸åŒç±»å‹ï¼›4. ç©ºé—´åˆ©ç”¨ï¼šæ ¹æ®æ´çªŸåŠŸèƒ½åˆç†è®¾è®¡ç©ºé—´å¸ƒå±€ï¼›5. å»ºç­‘è£…é¥°ï¼šçªŸæªã€é—¨æ¥£ç­‰å»ºç­‘æ„ä»¶è£…é¥°ç²¾ç¾ã€‚',
            'æ–‡ç‰©ç‰¹ç‚¹|æ–‡ç‰©ä»·å€¼|å†å²ä»·å€¼|è€ƒå¤ä»·å€¼': 'è«é«˜çªŸæ–‡ç‰©ä»·å€¼ä¸»è¦ä½“ç°åœ¨ï¼š1. å†å²è§è¯ï¼šè®°å½•äº†åå…­å›½è‡³å…ƒä»£è¿‘åƒå¹´çš„å†å²å˜è¿ï¼›2. è‰ºæœ¯ä»·å€¼ï¼šå£ç”»å’Œå½©å¡‘å±•ç°äº†ç²¾æ¹›çš„å¤ä»£è‰ºæœ¯ï¼›3. æ–‡çŒ®ä»·å€¼ï¼šè—ç»æ´å‡ºåœŸçš„æ–‡çŒ®æ¶‰åŠå®—æ•™ã€æ–‡å­¦ã€å†å²ç­‰å¤šä¸ªé¢†åŸŸï¼›4. æ–‡åŒ–äº¤æµï¼šåæ˜ äº†ä¸­è¥¿æ–‡åŒ–äº¤èçš„å†å²ï¼›5. ç§‘ç ”ä»·å€¼ï¼šä¸ºç ”ç©¶å¤ä»£ç¤¾ä¼šã€è‰ºæœ¯ã€å®—æ•™æä¾›é‡è¦èµ„æ–™ã€‚',
            'æ‹ç…§|æ‘„å½±|æ‹è§†é¢‘|è‡ªæ‹|å½•åƒ': 'ä¸ºäº†ä¿æŠ¤æ–‡ç‰©ï¼Œè«é«˜çªŸå®ä½“æ´çªŸå†…ä¸¥ç¦æ‹ç…§å’Œæ‘„åƒã€‚æ‚¨å¯ä»¥åœ¨æ™¯åŒºå¤–éƒ¨ã€æ•°å­—å±•ç¤ºä¸­å¿ƒç­‰åŒºåŸŸæ‹ç…§ç•™å¿µã€‚å»ºè®®é€šè¿‡è´­ä¹°ç”»å†Œã€æ˜ä¿¡ç‰‡ç­‰æ–¹å¼è®°å½•è«é«˜çªŸçš„ç¾æ™¯ã€‚è¿è§„æ‹ç…§å¯èƒ½ä¼šè¢«è¦æ±‚åˆ é™¤ç…§ç‰‡ï¼Œä¸¥é‡è€…å°†è¢«è¯·å‡ºæ™¯åŒºã€‚',
            'å•æ‰€|æ´—æ‰‹é—´|å«ç”Ÿé—´|åŒ–å¦†é—´|ä¼‘æ¯': 'è«é«˜çªŸæ™¯åŒºè®¾æœ‰å¤šå¤„æ´—æ‰‹é—´ï¼Œä¸»è¦åˆ†å¸ƒåœ¨ï¼š1. æ•°å­—å±•ç¤ºä¸­å¿ƒï¼›2. åœè½¦åœºé™„è¿‘ï¼›3. å®ä½“æ´çªŸåŒºåŸŸã€‚æ‰€æœ‰æ´—æ‰‹é—´éƒ½é…å¤‡åŸºç¡€è®¾æ–½ï¼Œä¿æŒå®šæœŸæ¸…æ´ã€‚å»ºè®®å‚è§‚å‰æå‰è§„åˆ’å¥½ä¼‘æ¯æ—¶é—´ã€‚',
            'åƒé¥­|ç”¨é¤|é¤å…|å°åƒ|é¥®é£Ÿ': 'æ™¯åŒºå†…è®¾æœ‰é¤å…å’Œå°åƒåº—ï¼Œæä¾›ç®€é¤ã€é¢é£Ÿç­‰ï¼Œä»·æ ¼é€‚ä¸­ã€‚å»ºè®®åœ¨å¸‚åŒºåƒå®Œæ—©é¤å†æ¥æ™¯åŒºï¼Œæˆ–è‡ªå¸¦å¹²ç²®å’Œæ°´ã€‚æ•¦ç…Œå¸‚åŒºæœ‰å¾ˆå¤šç‰¹è‰²ç¾é£Ÿï¼Œå¦‚é©´è‚‰é»„é¢ã€ç¾Šè‚‰æ³¡é¦ã€æçš®æ°´ç­‰ï¼Œå€¼å¾—å“å°ã€‚',
            'è¡Œæ|å¯„å­˜|å­˜åŒ…|èƒŒåŒ…': 'ä¸ºäº†æ–¹ä¾¿å‚è§‚ï¼Œå»ºè®®å°†å¤§ä»¶è¡Œæå­˜æ”¾åœ¨æ¸¸å®¢ä¸­å¿ƒçš„å¯„å­˜å¤„ã€‚è´µé‡ç‰©å“è¯·éšèº«æºå¸¦ã€‚å¯„å­˜æœåŠ¡æ”¶è´¹æ ‡å‡†ï¼šå°ä»¶è¡Œæ5å…ƒ/ä»¶ï¼Œå¤§ä»¶è¡Œæ10å…ƒ/ä»¶ã€‚å¯„å­˜æ—¶ä¼šå‘æ”¾å‡­æ¡ï¼Œè¯·å¦¥å–„ä¿ç®¡ã€‚',
            'è½®æ¤…|å©´å„¿è½¦|æ— éšœç¢': 'æ™¯åŒºæä¾›è½®æ¤…ç§ŸèµæœåŠ¡ï¼Œéœ€è¦åœ¨æ¸¸å®¢ä¸­å¿ƒåŠç†ã€‚ä¸»è¦å‚è§‚åŒºåŸŸéƒ½è®¾æœ‰æ— éšœç¢é€šé“ã€‚å¦‚éœ€å¸®åŠ©ï¼Œå¯ä»¥è”ç³»å·¥ä½œäººå‘˜ã€‚å»ºè®®æå‰å‘ŠçŸ¥è®²è§£å‘˜ï¼Œä»¥ä¾¿è°ƒæ•´å‚è§‚è·¯çº¿å’ŒèŠ‚å¥ã€‚',
            'ä¿¡å·|ç½‘ç»œ|WIFI|ä¸Šç½‘': 'æ™¯åŒºä¸»è¦åŒºåŸŸéƒ½æœ‰æ‰‹æœºä¿¡å·è¦†ç›–ã€‚æ•°å­—å±•ç¤ºä¸­å¿ƒæä¾›å…è´¹WIFIã€‚åœ¨æ´çªŸåŒºåŸŸï¼Œä¿¡å·å¯èƒ½ä¼šè¾ƒå¼±ï¼Œå»ºè®®æå‰ä¸‹è½½ç¦»çº¿åœ°å›¾ã€‚ä¸ºäº†æ›´å¥½çš„å‚è§‚ä½“éªŒï¼Œå»ºè®®å‡å°‘ä½¿ç”¨æ‰‹æœºã€‚',
            'åœè½¦|æ³Šè½¦|è‡ªé©¾|åœè½¦è´¹': 'æ™¯åŒºè®¾æœ‰ä¸“é—¨çš„åœè½¦åœºï¼Œåˆ†ä¸ºå¤§å‹è½¦å’Œå°å‹è½¦åŒºåŸŸã€‚å°å‹è½¦åœè½¦è´¹10-20å…ƒ/æ¬¡ï¼Œå¤§å·´è½¦30-50å…ƒ/æ¬¡ã€‚å»ºè®®é”™å³°åœè½¦ï¼Œæ—ºå­£æ—¶åœè½¦ä½ç´§å¼ ã€‚è‡ªé©¾æ¸¸å®¢å¯ä»¥ä½¿ç”¨å¯¼èˆªç›´æ¥åˆ°è¾¾åœè½¦åœºã€‚',
            'å¤©æ°”|æ¸©åº¦|æ°”å€™|ç©¿ä»€ä¹ˆ': 'æ•¦ç…Œæ˜¼å¤œæ¸©å·®å¤§ï¼Œå»ºè®®ç©¿ç€èˆ’é€‚ã€è½»ä¾¿çš„è¡£ç‰©ï¼Œæœ€å¥½åˆ†å±‚ç©¿ç€ã€‚å¤å­£é˜²æ™’å¿…å¤‡ï¼šé®é˜³å¸½ã€é˜²æ™’è¡£ã€å¤ªé˜³é•œã€‚å†¬å­£æ³¨æ„ä¿æš–ï¼šç¾½ç»’æœã€ä¿æš–å†…è¡£ã€å›´å·¾æ‰‹å¥—ã€‚å…¨å¹´éƒ½è¦å¸¦å¥½é˜²æ™’ç”¨å“å’Œæ°´ã€‚',
            'ä½å®¿|é…’åº—|ä½å“ª|ä½å®¿å»ºè®®': 'å¯ä»¥é€‰æ‹©ä½åœ¨æ•¦ç…Œå¸‚åŒºï¼Œä»å¸‚åŒºåˆ°è«é«˜çªŸçº¦30åˆ†é’Ÿè½¦ç¨‹ã€‚å¸‚åŒºæœ‰å„ç±»æ˜Ÿçº§é…’åº—å’Œç‰¹è‰²å®¢æ ˆï¼Œä»·æ ¼ä»200-1000å…ƒä¸ç­‰ã€‚ä¹Ÿå¯ä»¥ä½åœ¨è«é«˜çªŸæ™¯åŒºé™„è¿‘ï¼Œä½†é€‰æ‹©è¾ƒå°‘ã€‚å»ºè®®æå‰é¢„è®¢ï¼Œæ—ºå­£æˆ¿ä»·ä¼šä¸Šæ¶¨ã€‚',
            'å®‰å…¨|ä¿ç®¡|è´µé‡ç‰©å“|æ³¨æ„äº‹é¡¹': '1. ä¿ç®¡å¥½éšèº«ç‰©å“ï¼Œè´µé‡ç‰©å“ä¸è¦ç¦»èº«ï¼›2. éµå®ˆæ™¯åŒºè§„å®šï¼Œä¸è¦æ“…è‡ªè¡ŒåŠ¨ï¼›3. æ³¨æ„å°é˜¶ï¼Œä¿æŒå®‰å…¨è·ç¦»ï¼›4. è¡¥å……æ°´åˆ†ï¼Œé˜²æ­¢ä¸­æš‘ï¼›5. å¬ä»å·¥ä½œäººå‘˜æŒ‡æŒ¥ï¼Œå‘ç°é—®é¢˜åŠæ—¶æŠ¥å‘Šã€‚',
            'è¯­éŸ³å¯¼è§ˆ|ç”µå­å¯¼æ¸¸|è®²è§£å™¨': 'æ™¯åŒºä¸æä¾›å•ç‹¬çš„è¯­éŸ³å¯¼è§ˆå™¨ï¼Œè€Œæ˜¯é…å¤‡ä¸“ä¸šè®²è§£å‘˜å…¨ç¨‹è®²è§£ã€‚Aç±»é—¨ç¥¨åŒ…å«è®²è§£æœåŠ¡ï¼Œè®²è§£å‘˜ç»è¿‡ä¸“ä¸šåŸ¹è®­ï¼Œèƒ½æ·±å…¥æµ…å‡ºåœ°ä»‹ç»æ¯ä¸ªæ´çªŸçš„ç‰¹è‰²ã€‚å¦‚éœ€è‹±è¯­ç­‰å¤–è¯­è®²è§£ï¼Œå»ºè®®æå‰é¢„çº¦ã€‚',
            'æŠ•è¯‰|æ„è§|å»ºè®®|é—®é¢˜åé¦ˆ': 'å¦‚é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š1. ç°åœºå‘å·¥ä½œäººå‘˜åæ˜ ï¼›2. åˆ°æ¸¸å®¢æœåŠ¡ä¸­å¿ƒæŠ•è¯‰ï¼›3. æ‹¨æ‰“æ™¯åŒºæœåŠ¡çƒ­çº¿ï¼›4. é€šè¿‡å®˜æ–¹å¾®ä¿¡å…¬ä¼—å·åé¦ˆã€‚å·¥ä½œäººå‘˜ä¼šè®¤çœŸå¤„ç†æ‚¨çš„æ„è§ï¼Œå°½å¿«ç»™äºˆå›å¤ã€‚'
        };

        async function callOpenAI(message) {
            // æ£€æŸ¥æ˜¯å¦åŒ¹é…é¢„è®¾é—®ç­”
            for (let keywords of Object.keys(QA_DATABASE)) {
                const keywordArray = keywords.split('|');
                if (keywordArray.some(keyword => 
                    message.toLowerCase().includes(keyword.toLowerCase()) || 
                    keyword.toLowerCase().includes(message.toLowerCase())
                )) {
                    return QA_DATABASE[keywords];
                }
            }
            
            // å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°é¢„è®¾é—®ç­”ï¼Œè¿”å›æ›´å‹å¥½çš„æç¤º
            return `æ‚¨å¥½ï¼çœ‹èµ·æ¥æ‚¨æƒ³äº†è§£è«é«˜çªŸçš„ç›¸å…³ä¿¡æ¯ã€‚æ‚¨å¯ä»¥è¿™æ ·é—®æˆ‘ï¼š

            ğŸ›ï¸ å‚è§‚ç›¸å…³ï¼š
            - "è«é«˜çªŸåœ¨å“ªé‡Œï¼Ÿæ€ä¹ˆå»ï¼Ÿ"
            - "é—¨ç¥¨å¤šå°‘é’±ï¼Ÿæ€ä¹ˆä¹°ç¥¨ï¼Ÿ"
            - "å‚è§‚è¦å¤šé•¿æ—¶é—´ï¼Ÿ"
            - "å“ªäº›æ´çªŸæœ€å€¼å¾—çœ‹ï¼Ÿ"

            ğŸ¨ è‰ºæœ¯ç‰¹è‰²ï¼š
            - "å£ç”»æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"
            - "å½©å¡‘è‰ºæœ¯æ€ä¹ˆæ ·ï¼Ÿ"
            - "æœ€æœ‰åçš„å£ç”»æ˜¯å“ªäº›ï¼Ÿ"

            ğŸƒ æ¸¸ç©å»ºè®®ï¼š
            - "ä»€ä¹ˆå­£èŠ‚å»æœ€å¥½ï¼Ÿ"
            - "å¸¦è€äººå­©å­å»åˆé€‚å—ï¼Ÿ"
            - "æœ‰ä»€ä¹ˆç‰¹è‰²çºªå¿µå“ï¼Ÿ"

            æˆ–è€…æ‚¨å¯ä»¥æ¢ä¸ªæ–¹å¼é—®æˆ‘ï¼Œæˆ‘ä¼šå°½åŠ›ä¸ºæ‚¨è§£ç­”ï¼`;
        }

        function toggleAIModal() {
            const modal = document.getElementById('aiModal');
            modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
            if (modal.style.display === 'block') {
                document.getElementById('aiInput').focus();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('aiInput');
            const messages = document.getElementById('aiMessages');
            const userMessage = input.value.trim();

            if (userMessage) {
                messages.innerHTML += `
                    <div class="message user-message">
                        ${userMessage}
                    </div>
                `;

                input.value = '';
                messages.scrollTop = messages.scrollHeight;

                const response = await callOpenAI(userMessage);
                messages.innerHTML += `
                    <div class="message ai-message">
                        ${response}
                    </div>
                `;
                messages.scrollTop = messages.scrollHeight;
            }
        }
    </script>
</body>
</html> 